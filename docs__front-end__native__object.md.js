(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[66],{WlhR:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),r=t.n(a),o=(t("B2uJ"),t("+su7"),t("qOys")),c=t.n(o);t("5Yjd");n["default"]=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"\u5bf9\u8c61-api"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5bf9\u8c61-api"},r.a.createElement("span",{className:"icon icon-link"})),"\u5bf9\u8c61 API"),r.a.createElement("h2",{id:"objectcreate"},r.a.createElement("a",{"aria-hidden":"true",href:"#objectcreate"},r.a.createElement("span",{className:"icon icon-link"})),"Object.create"),r.a.createElement(c.a,{code:"Object.create = function(proto) {\n  if (typeof proto !== 'object' && typeof proto !== 'function') {\n    throw new TypeError('Object prototype may only be an Object:' + proto);\n  } else if (proto === null) {\n    throw new Error(\n      \"This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.\"\n    );\n  }\n\n  if (typeof properties !== 'undefined') {\n    throw new Error(\n      \"This browser's implementation of Object.create is a shim and doesn't support a second argument.\"\n    );\n  }\n\n  // \u58f0\u660e\u6784\u9020\u51fd\u6570\n  function Fn() {}\n  // \u5c06\u6784\u9020\u51fd\u6570\u7684\u8fd0\u884c prototype \u8fde\u63a5\u5728\u6307\u5b9a\u7684 proto \u4e0a\n  Fn.prototype = proto;\n  // \u8fd4\u56de\u5b9e\u4f8b\u5316\u5bf9\u8c61\n  return new Fn();\n};\n",lang:"js"}),r.a.createElement("h2",{id:"new"},r.a.createElement("a",{"aria-hidden":"true",href:"#new"},r.a.createElement("span",{className:"icon icon-link"})),"new"),r.a.createElement(c.a,{code:"function objectFactory(constructor, ...restParams) {\n  // \u521b\u5efa\u7a7a\u5bf9\u8c61\uff0c\u7a7a\u5bf9\u8c61\u5173\u8054\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61\n  const instance = Object.create(constructor.prototype);\n  // \u6267\u884c\u5bf9\u8c61\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u540c\u65f6\u8be5\u5b9e\u4f8b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u88ab this \u6240\u5f15\u7528\uff0c\u5373 this \u6307\u5411\u65b0\u6784\u9020\u7684\u5b9e\u4f8b\n  const result = constructor.call(instance, restParams);\n  // \u5224\u65ad\u6784\u9020\u51fd\u6570\u7684\u8fd0\u884c\u7ed3\u679c\u662f\u5426\u5bf9\u8c61\u7c7b\u578b\n  return (typeof result === 'object' && result) || instance;\n}\n",lang:"js"}),r.a.createElement("h2",{id:"instanceof"},r.a.createElement("a",{"aria-hidden":"true",href:"#instanceof"},r.a.createElement("span",{className:"icon icon-link"})),"instanceof"),r.a.createElement("ol",null,r.a.createElement("li",null,"\u5148\u53d6\u5f97\u5f53\u524d\u7c7b\u7684\u539f\u578b\uff0c\u5f53\u524d\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\u94fe"),r.a.createElement("li",null,"\u4e00\u76f4\u5faa\u73af\uff08\u6267\u884c\u539f\u578b\u94fe\u7684\u67e5\u627e\u673a\u5236\uff09")),r.a.createElement(c.a,{code:"function _instanceof(instance, parent) {\n  const constructor = parent.prototype;\n\n  let proto = Object.getPrototypeOf(instance);\n\n  while (true) {\n    // \u627e\u5230\u4e86\u539f\u578b\u94fe\u7684\u672b\u7aef\n    if (proto === null) return false;\n\n    // \u5f53\u524d\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\u94fe\u4e0a\u627e\u5230\u4e86\u5f53\u524d\u7c7b\n    if (proto === constructor) return true;\n\n    proto = Object.getPrototypeOf(proto);\n  }\n}\n",lang:"js"}),r.a.createElement("h2",{id:"\u7ee7\u627f"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u7ee7\u627f"},r.a.createElement("span",{className:"icon icon-link"})),"\u7ee7\u627f"),r.a.createElement(c.a,{code:"function inherit(Child, Parent) {\n  // \u4ee5 Parent.protoyep \u4e3a\u539f\u578b\u521b\u5efa\u5b9e\u4f8b\n  let instance = Object.create(Parent.prototype);\n  // \u5c06 instance \u7684\u6784\u9020\u51fd\u6570\u6307\u5b9a\u4e3a Child\n  instance.constructor = Child;\n  // \u5c06 Child \u6784\u9020\u51fd\u6570\u7684\u8fd0\u884c\u6307\u5b9a\u4e3a instance\n  Child.prototype = instance;\n}\n",lang:"js"}),r.a.createElement("h2",{id:"\u62f7\u8d1d"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u62f7\u8d1d"},r.a.createElement("span",{className:"icon icon-link"})),"\u62f7\u8d1d"),r.a.createElement("h3",{id:"\u5bf9\u8c61\u6d45\u62f7\u8d1d"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5bf9\u8c61\u6d45\u62f7\u8d1d"},r.a.createElement("span",{className:"icon icon-link"})),"\u5bf9\u8c61\u6d45\u62f7\u8d1d"),r.a.createElement("h4",{id:"\u5bf9\u8c61\u5408\u5e76"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5bf9\u8c61\u5408\u5e76"},r.a.createElement("span",{className:"icon icon-link"})),"\u5bf9\u8c61\u5408\u5e76"),r.a.createElement(c.a,{code:"const result = Object.assign({}, source);\n",lang:"js"}),r.a.createElement("h4",{id:"\u89e3\u6784\u8d4b\u503c"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u89e3\u6784\u8d4b\u503c"},r.a.createElement("span",{className:"icon icon-link"})),"\u89e3\u6784\u8d4b\u503c"),r.a.createElement(c.a,{code:"const result = { ...source };\n",lang:"js"}),r.a.createElement("p",null,"\u95ee\u9898\uff1a\u539f\u578b\u5bf9\u8c61\u4e22\u5931\uff0c\u65e0\u6cd5\u5224\u65ad\u5b9e\u4f8b"),r.a.createElement("h3",{id:"\u5bf9\u8c61\u6df1\u62f7\u8d1d"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5bf9\u8c61\u6df1\u62f7\u8d1d"},r.a.createElement("span",{className:"icon icon-link"})),"\u5bf9\u8c61\u6df1\u62f7\u8d1d"),r.a.createElement("h5",{id:"\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316\u6cd5"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316\u6cd5"},r.a.createElement("span",{className:"icon icon-link"})),"\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316\u6cd5"),r.a.createElement("p",null,"\u80fd\u5e94\u4ed8\u65e5\u5e38\u7684\u62f7\u8d1d\u9700\u6c42\uff0c\u5bf9\u57fa\u672c\u6570\u636e\u7c7b\u578b\u3001\u5bf9\u8c61\u548c\u6570\u7ec4\u6709\u6548\u3002"),r.a.createElement(c.a,{code:"const result = JSON.parse(JSON.stringify(source));\n",lang:"js"}),r.a.createElement("h5",{id:"\u8fed\u4ee3\u9012\u5f52\u6cd5"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u8fed\u4ee3\u9012\u5f52\u6cd5"},r.a.createElement("span",{className:"icon icon-link"})),"\u8fed\u4ee3\u9012\u5f52\u6cd5"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u80fd\u62f7\u8d1d\u81ea\u8eab\u53ef\u679a\u4e3e"),r.a.createElement("li",null,"\u80fd\u62f7\u8d1d\u81ea\u8eab\u4e0d\u53ef\u679a\u4e3e"),r.a.createElement("li",null,"\u80fd\u62f7\u8d1d\u81ea\u8eab Symbol \u7c7b\u578b\u952e"),r.a.createElement("li",null,"\u80fd\u62f7\u8d1d\u539f\u578b\u4e0a\u53ef\u679a\u4e3e"),r.a.createElement("li",null,"\u80fd\u62f7\u8d1d\u539f\u578b\u4e0a\u4e0d\u53ef\u679a\u4e3e"),r.a.createElement("li",null,"\u80fd\u62f7\u8d1d\u539f\u578b\u4e0a Symbol \u7c7b\u578b\u952e")),r.a.createElement(c.a,{code:"const tags = {\n  // \u53ef\u7ee7\u7eed\u904d\u5386\n  map: '[object Map]',\n  set: '[object Set]',\n  array: '[object Array]',\n  object: '[object Object]',\n  arguments: '[object Arguments]',\n  // \u4e0d\u53ef\u7ee7\u7eed\u904d\u5386\n  boolean: '[object Boolean]',\n  number: '[object Number]',\n  string: '[object String]',\n  symbol: '[object Symbol]',\n  error: '[object Error]',\n  date: '[object Date]',\n  regexp: '[object RegExp]',\n  function: '[object Function]',\n};\n\nconst deepTags = [tags.map, tags.set, tags.array, tags.object, tags.args];\n\nfunction isObject(val) {\n  const type = typeof val;\n  return val !== null && (type === 'object' || type === 'function');\n}\n\nfunction cloneSymbol(origin) {\n  return Symbol(origin.description);\n}\n\nfunction cloneRegExp(origin) {\n  const flag = /\\w*$/;\n  const newRegExp = new origin.constructor(origin.source, flag.exec(origin));\n  newRegExp.lastIndex = origin.lastIndex;\n  return newRegExp;\n}\n\nfunction cloneFunction(origin) {\n  return eval(`(${origin.toString()})`);\n}\n\nfunction deepClone(origin, hashMap = new WeakMap()) {\n  // \u62f7\u8d1d\u539f\u59cb\u6570\u636e\u7c7b\u578b\n  if (!isObject(origin)) return origin;\n\n  // \u521d\u59cb\u5316\n  const type = Object.prototype.toString.call(origin);\n\n  // \u521d\u59cb\u5316\u62f7\u8d1d\u5bf9\u8c61\n  let target = null;\n\n  if (deepTags.includes(type)) {\n    target = new origin.constructor();\n  } else {\n    switch (type) {\n      case tags.boolean:\n      case tags.number:\n      case tags.string:\n      case tags.error:\n      case tags.date:\n        return new origin.constructor(origin);\n      case tags.regexp:\n        return cloneRegExp(origin);\n      case tags.symbol:\n        return cloneSymbol(origin);\n      case tags.function:\n        return cloneFunction(origin);\n      default:\n        return null;\n    }\n  }\n\n  // \u67e5\u8868\uff0c\u9632\u6b62\u5faa\u73af\u62f7\u8d1d\n  if (hashMap.has(origin)) return hashMap.get(origin);\n\n  // \u54c8\u5e0c\u8868\u8bbe\u7f6e\u503c\n  hashMap.set(origin, target);\n\n  // \u62f7\u8d1d Set\n  if (type === tags.set) {\n    origin.forEach(value => {\n      target.add(deepClone(value, hashMap));\n    });\n  }\n\n  // \u62f7\u8d1d Map\n  if (type === tags.map) {\n    origin.forEach((value, key) => {\n      target.set(key, deepClone(value, hashMap));\n    });\n  }\n\n  // \u62f7\u8d1d\u6570\u7ec4\n  if (type === tags.array) {\n    origin.forEach((item, index) => {\n      target[index] = deepClone(origin[index], hashMap);\n    });\n  }\n\n  // \u62f7\u8d1d\u5bf9\u8c61\n  if (type === tags.object) {\n    Object.keys(origin).forEach(key => {\n      target[key] = deepClone(origin[key], hashMap);\n    });\n  }\n\n  return target;\n}\n",lang:"js"}),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("strong",null,"\u53c2\u8003\u8d44\u6599\uff1a")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://juejin.im/post/5d6aa4f96fb9a06b112ad5b1",target:"_blank",rel:"noopener noreferrer"},"\u5982\u4f55\u5199\u51fa\u4e00\u4e2a\u60ca\u8273\u9762\u8bd5\u5b98\u7684\u6df1\u62f7\u8d1d?",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))))))}}}]);