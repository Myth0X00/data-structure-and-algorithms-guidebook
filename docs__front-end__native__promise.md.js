(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[56],{"7caF":function(e,n,t){"use strict";t.r(n);var l=t("q1tI"),r=t.n(l),a=(t("B2uJ"),t("+su7"),t("qOys")),o=t.n(a);t("5Yjd");n["default"]=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"\u5b9e\u73b0-promise"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5b9e\u73b0-promise"},r.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0 Promise"),r.a.createElement("p",null,"\u7b80\u5355 Promise \u7c97\u7cd9\u5b9e\u73b0\uff0c\u5173\u952e\u70b9\u5728\u4e8e\uff1a"),r.a.createElement("ol",null,r.a.createElement("li",null,"\u5f53 ",r.a.createElement("code",null,"pending")," \u65f6\uff0c",r.a.createElement("code",null,"thenable")," \u51fd\u6570\u7531\u4e00\u4e2a\u961f\u5217\u7ef4\u62a4"),r.a.createElement("li",null,"\u5f53\u72b6\u6001\u53d8\u4e3a ",r.a.createElement("code",null,"resolveed(fulfilled)")," \u65f6\uff0c\u961f\u5217\u4e2d\u6240\u6709 ",r.a.createElement("code",null,"thenable")," \u51fd\u6570\u6267\u884c"),r.a.createElement("li",null,"\u5f53 ",r.a.createElement("code",null,"resolved")," \u65f6\uff0c",r.a.createElement("code",null,"thenable")," \u51fd\u6570\u76f4\u63a5\u6267\u884c")),r.a.createElement(o.a,{code:"class Promise {\n  static resolve(value) {\n    if (value && value.then) {\n      return value;\n    }\n    return new Promise(resolve => resolve(value));\n  }\n\n  constructor(fn) {\n    this.value = undefined;\n    this.reason = undefined;\n    this.status = 'PENDING';\n\n    // \u7ef4\u62a4 resolve/pending \u7684\u51fd\u6570\u961f\u5217\n    this.resolveQueue = [];\n    this.rejectQueue = [];\n\n    const resolve = value => {\n      //   \u6ce8\u610f\u6b64\u5904\u7684 setTImeout\n      setTimeout(() => {\n        this.status = 'RESOLVED';\n        this.value = value;\n        this.resolveQueue.forEach(({ fn, resolve: res, reject: rej }) => res(fn(value)));\n      });\n    };\n\n    const reject = err => {\n      setTimeout(() => {\n        this.status = 'REJECTED';\n        this.reason = err;\n        this.rejectQueue.forEach(({ fn, resolve: res, reject: rej }) => rej(fn(err)));\n      });\n    };\n\n    fn(resolve, reject);\n  }\n\n  then(fn) {}\n\n  catch(fn) {}\n}\n\nPromise.resolve(10)\n  .then(o => o * 10)\n  .then(o => o + 10)\n  .then(o => console.log(o));\n\nnew Promise((resolve, reject) => reject('Error')).catch(err => console.log('Error', err));\n",lang:"js"}),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://juejin.im/post/5e8bec156fb9a03c4d40f4bc",target:"_blank",rel:"noopener noreferrer"},"\u624b\u5199\u4e00\u4e2a Promise/A+\uff0c\u5b8c\u7f8e\u901a\u8fc7\u5b98\u65b9 872 \u4e2a\u6d4b\u8bd5\u7528\u4f8b",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))))))}}}]);